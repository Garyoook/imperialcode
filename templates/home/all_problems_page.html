<!DOCTYPE html>
<html>
  {% load static %}
  <head>
    <title>All Problems Page</title>
    <link rel="icon" href="{% static 'resources/favicon.ico' %}" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link href={% static "resources/css/axure_rp_page.css" %} type="text/css" rel="stylesheet"/>
    <link href={% static "data/styles.css" %} type="text/css" rel="stylesheet"/>
    <link href={% static "files/all_problems_page/styles.css" %} type="text/css" rel="stylesheet"/>
    <script src={% static "resources/scripts/jquery-3.2.1.min.js" %}></script>
    <script src={% static "resources/scripts/axure/axQuery.js" %}></script>
    <script src={% static "resources/scripts/axure/globals.js" %}></script>
    <script src={% static "resources/scripts/axutils.js" %}></script>
    <script src={% static "resources/scripts/axure/annotation.js" %}></script>
    <script src={% static "resources/scripts/axure/axQuery.std.js" %}></script>
    <script src={% static "resources/scripts/axure/doc.js" %}></script>
    <script src={% static "resources/scripts/messagecenter.js" %}></script>
    <script src={% static "resources/scripts/axure/events.js" %}></script>
    <script src={% static "resources/scripts/axure/recording.js" %}></script>
    <script src={% static "resources/scripts/axure/action.js" %}></script>
    <script src={% static "resources/scripts/axure/expr.js" %}></script>
    <script src={% static "resources/scripts/axure/geometry.js" %}></script>
    <script src={% static "resources/scripts/axure/flyout.js" %}></script>
    <script src={% static "resources/scripts/axure/model.js" %}></script>
    <script src={% static "resources/scripts/axure/repeater.js" %}></script>
    <script src={% static "resources/scripts/axure/sto.js" %}></script>
    <script src={% static "resources/scripts/axure/utils.temp.js" %}></script>
    <script src={% static "resources/scripts/axure/variables.js" %}></script>
    <script src={% static "resources/scripts/axure/drag.js" %}></script>
    <script src={% static "resources/scripts/axure/move.js" %}></script>
    <script src={% static "resources/scripts/axure/visibility.js" %}></script>
    <script src={% static "resources/scripts/axure/style.js" %}></script>
    <script src={% static "resources/scripts/axure/adaptive.js" %}></script>
    <script src={% static "resources/scripts/axure/tree.js" %}></script>
    <!-- <script src={% static "resources/scripts/axure/init.temp.js" %}></script> -->
    <script src={% static "resources/scripts/axure/legacy.js" %}></script>
    <script src={% static "resources/scripts/axure/viewer.js" %}></script>
    <script src={% static "resources/scripts/axure/math.js" %}></script>
    <script src={% static "resources/scripts/axure/jquery.nicescroll.min.js" %}></script>
    <script src={% static "data/document.js" %}></script>
    <script src={% static "files/all_problems_page/data.js" %}></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return "{% static 'resources/images/transparent.gif'%}"; };
      $axure.utils.getOtherPath = function() { return "{% static 'resources/Other.html' %}"; };
      $axure.utils.getReloadPath = function() { return "{% static 'resources/reload.html' %}"; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Rectangle) -->
      <div id="u211" class="ax_default box_1">
        <div id="u211_div" class=""></div>
        <div id="u211_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u212" class="ax_default box_2">
        <div id="u212_div" class=""></div>
        <div id="u212_text" class="text " style= "display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      {% if user_agent.is_mobile == False %}
      {% include "home/../global_components/navbar.html" %}
      {% else %}
      {% include "home/../global_components/navbar_multidevice.html" %}
      {% endif %}
      <div id="u213" style="display:none; visibility:hidden;"></div>

      <!-- Language filter (Droplist) -->
      <div id="u230" class="ax_default droplist" data-label="Language filter">
        <div id="u230_div" class=""></div>
        <select id="u230_input" class="u230_input">
          <option class="u230_input_option" value="All">All</option>
          <option class="u230_input_option" value="Haskell">Haskell</option>
          <option class="u230_input_option" value="Java">Java</option>
          <option class="u230_input_option" value="C">C</option>
        </select>
      </div>

      <!-- Category filter (Droplist) -->
      <div id="u231" class="ax_default droplist" data-label="Category filter">
        <div id="u231_div" class=""></div>
        <select id="u231_input" class="u231_input">
          <option class="u231_input_option" value="All">All</option>
          <option class="u231_input_option" value="Recursion">Recursion</option>
          <option class="u231_input_option" value="Dynamic Programming">Dynamic Programming</option>
          <option class="u231_input_option" value="Control Flow">Control Flow</option>
          <option class="u231_input_option" value="Divide and Conquer">Divide and Conquer</option>
          <option class="u231_input_option" value="Tree">Tree</option>
        </select>
      </div>

      <!-- Unnamed (Text Field) -->
      <div id="u232" class="ax_default text_field">
        <div id="u232_div" class=""></div>
        <input id="u232_input" type="search" value="" class="u232_input" placeholder="Search problem title, description, or IDs"/>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u233" class="ax_default heading_1">
        <div id="u233_div" class=""></div>
        <div id="u233_text" class="text ">
          <p><span>Practice Problems</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u234" class="ax_default label">
        <div id="u234_div" class=""></div>
        <div id="u234_text" class="text ">
          <p><span>Language</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u235" class="ax_default label">
        <div id="u235_div" class=""></div>
        <div id="u235_text" class="text ">
          <p><span>Category</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u236" class="ax_default label">
        <div id="u236_div" class=""></div>
        <div id="u236_text" class="text ">
          <p><span>Difficulty</span></p>
        </div>
      </div>

      <!-- Difficulty filter (Droplist) -->
      <div id="u237" class="ax_default droplist" data-label="Difficulty filter">
        <div id="u237_div" class=""></div>
        <select id="u237_input" class="u237_input">
          <option class="u237_input_option" value="All">All</option>
          <option class="u237_input_option" value="★★★">★★★</option>
          <option class="u237_input_option" value="★★">★★</option>
          <option class="u237_input_option" value="★">★</option>
        </select>
      </div>

      <!-- Unnamed (List Box) -->
      <div id="u238" class="ax_default list_box">
        <div id="u238_div" class=""></div>
        <select id="u238_input" size="2" class="u238_input">
            {% for problem in display_problems %}
                <option class="u238_input_option" onclick='displayInfo("{{ problem.title }}")'>{{ problem.title }}</option>
            {% endfor %}
        </select>
      </div>

      <!-- Type filter (Droplist) -->
      <div id="u239" class="ax_default droplist" data-label="Type filter">
        <div id="u239_div" class=""></div>
        <select id="u239_input" class="u239_input">
          <option class="u239_input_option" value="All">All</option>
          <option class="u239_input_option" value="Tutorial">Tutorial</option>
          <option class="u239_input_option" value="Exam">Exam</option>
          <option class="u239_input_option" value="Unassessed Exercise">Unassessed Exercise</option>
          <option class="u239_input_option" value="User Provided">User Provided</option>
        </select>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u240" class="ax_default label">
        <div id="u240_div" class=""></div>
        <div id="u240_text" class="text ">
          <p><span>Type</span></p>
        </div>
      </div>

      <!-- Status filter (Droplist) -->
      <div id="u241" class="ax_default droplist" data-label="Status filter">
        <div id="u241_div" class=""></div>
        <select id="u241_input" class="u241_input">
          <option class="u241_input_option" value="All">All</option>
          <option class="u241_input_option" value="Todo">Todo</option>
          <option class="u241_input_option" value="Solved">Solved</option>
          <option class="u241_input_option" value="In Progress">In Progress</option>
        </select>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u242" class="ax_default label">
        <div id="u242_div" class=""></div>
        <div id="u242_text" class="text ">
          <p><span>Status</span></p>
        </div>
      </div>

      <!-- Unnamed (Shape) -->
      <div id="u243" class="ax_default button" onclick="searchProblemsButtonOnClick()">
        <img id="u243_img" class="img " src={% static "images/past_papers_page/u200.svg" %}/>
        <div id="u243_text" class="text ">
          <p><span>Search</span></p>
        </div>
      </div>

      <!-- Unnamed (Shape) -->
      <div id="u244" class="ax_default button" onclick="clearFilters()">
        <img id="u244_img" class="img " src={% static "images/past_papers_page/u200.svg" %}/>
        <div id="u244_text" class="text ">
          <p><span>Clear Filter</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u245" class="ax_default box_1">
        <div id="u245_div" class=""></div>
        <div id="u245_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u246" class="ax_default box_1">
        <div id="u246_div" class=""></div>
        <div id="u246_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u247" class="ax_default button" onclick="startQuestionPaperOnClick()">
        <div id="u247_div" class=""></div>
        <div id="u247_text" class="text ">
          <p><span>Start</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u248" class="ax_default heading_1">
        <div id="u248_div" class=""></div>
        <div id="u248_text" class="text ">
          <p><span>{{ selected_problem.title }}</span></p>
        </div>
      </div>

      <!-- Unnamed (Text Area) -->
      <div id="u249" class="ax_default text_area disabled">
        <div id="u249_div" class="disabled"></div>
        <textarea id="u249_input" class="u249_input" disabled>{{ selected_problem.desc }}</textarea>
      </div>

          <!-- Unnamed (Rectangle) -->
      <div id="year_label" class="ax_default heading_1">
        <div id="year_div" class=""></div>
        <div id="year_text" class="text ">
          <p><span>
              {% if not selected_problem.year == 0 %}
                  {{selected_problem.year}}
              {% endif %}
          </span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u250" class="ax_default heading_1">
        <div id="u250_div" class=""></div>
        <div id="u250_text" class="text ">
          <p><span style="font-family:'SF Pro Text Light', 'SF Pro Text', sans-serif;font-weight:300;">Difficulty: {{ selected_problem.difficulty }}</span></p>
        </div>
      </div>

      <!-- Bootstrap progress bar -->
      <div class="progress" style="position:absolute; left:1342px; top:570px; width:124px; height:18px">
        <div id="paper_progress_bar" class="progress-bar progress-bar-striped bg-info" role="progressbar"
             aria-valuenow="{{ selected_problem.progress }}" aria-valuemin="0" aria-valuemax="100"
             style="width:{{ selected_problem.progress }}%; color:black">
            {{ selected_problem.progress }}%
        </div>
      </div>
      <!-- Unnamed (Image) -->

      <div id="u251" class="ax_default image">
        <img id="u251_img" class="img " src={% static "images/past_papers_page/u206.png" %}/>
        <div id="u251_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u252" class="ax_default image">
        <img id="u252_img" class="img " src={% static "images/past_papers_page/u207.png" %}/>
        <div id="u252_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u253" class="ax_default heading_1">
        <div id="u253_div" class=""></div>
        <div id="u253_text" class="text ">
          <p><span>80</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u254" class="ax_default image">
        <img id="u254_img" class="img " src={% static "images/past_papers_page/u209.png" %}/>
        <div id="u254_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <!--
      <div id="u255" class="ax_default image">
        <img id="u255_img" class="img " src={% static "images/past_papers_page/u203.png" %}/>
        <div id="u255_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>
      -->

      <!-- Unnamed (Rectangle) -->
      <div id="u256" class="ax_default heading_1">
        <div id="u256_div" class=""></div>
        <div id="u256_text" class="text ">
          <p><span>Completion: </span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u257" class="ax_default heading_1">
        <div id="u257_div" class=""></div>
        <div id="u257_text" class="text ">
          <p><span>42</span></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
        <!--
      <div id="u258" class="ax_default image">
        <img id="u258_img" class="img " src={% static "images/all_problems_page/u258.png" %}/>
        <div id="u258_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>
      -->
      <div id="overall_progress">
        <canvas id="progress_chart" width="200" height="97"></canvas>
      </div>
      <!-- Unnamed (Rectangle) -->
      <div id="u259" class="ax_default label">
        <div id="u259_div" class=""></div>
        <div id="u259_text" class="text ">
          <p><span>Todo {{ overall_progress.1 }}/{{ overall_progress.0 }}</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u260" class="ax_default label">
        <div id="u260_div" class=""></div>
        <div id="u260_text" class="text ">
          <p><span>In Progress {{ overall_progress.2 }}/{{ overall_progress.0 }}</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u261" class="ax_default label">
        <div id="u261_div" class=""></div>
        <div id="u261_text" class="text ">
          <p><span>Solved {{ overall_progress.3 }}/{{ overall_progress.0 }}</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u262" class="ax_default heading_1">
        <div id="u262_div" class=""></div>
        <div id="u262_text" class="text ">
          <p><span>Progress</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <!--
      <div id="u263" class="ax_default button">
        <div id="u263_div" class=""></div>
        <div id="u263_text" class="text ">
          <p><span>I want to leave a comment / solution</span></p>
        </div>
      </div>
      -->
      <!-- Unnamed (Rectangle) -->
      <div id="u264" class="ax_default button">
        <div id="u264_div" class=""></div>
        <div id="u264_text" class="text ">
          <p><span>I want to contribute a problem</span></p>
        </div>
      </div>
    </div>
    <script>
        var ctx = document.getElementById("progress_chart").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ["Todo", "In Progress", "Solved"],
                datasets: [{
                    data: [{{overall_progress.1}}, {{ overall_progress.2 }}, {{ overall_progress.3 }}],
                    text: "ff",
                    backgroundColor: [
                        '#027DB4',
                        '#02A7F0',
                        '#81D3F8'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                legend: {
                    display: false
                },
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI
            }
        });


        let problemsList = document.getElementById("u238_input");
        problemsList.value = "{{ selected_problem.title }}";

        let currentUrl = new URL(window.location.href);
        let keywordsFilter = document.getElementById("u232_input");
        let languageFilter = document.getElementById("u230_input");
        let difficultyFilter = document.getElementById("u237_input");
        let categoryFilter = document.getElementById("u231_input");
        let typeFilter = document.getElementById("u239_input");
        let statusFilter = document.getElementById("u241_input");

        let filters = ["keywords", "lang", "diff", "cat", "type", "status"]
        let filterFields = [keywordsFilter, languageFilter, difficultyFilter, categoryFilter, typeFilter, statusFilter];

        for (let i = 0; i < filterFields.length; i++) {
            if (currentUrl.searchParams.get(filters[i])) {
                filterFields[i].value = currentUrl.searchParams.get(filters[i]);
            }
        }

        function searchProblemsButtonOnClick() {
            let baseUrl = new URL("/all_problems_page", window.location.origin);
            if (keywordsFilter.value.localeCompare("") != 0) {
                baseUrl.searchParams.append("keywords", keywordsFilter.value);
            }
            for (let i = 1; i < filterFields.length; i++) {
                let val = filterFields[i].value;
                if (val.localeCompare("All") != 0) {
                    baseUrl.searchParams.append(filters[i], val);
                }
            }
            window.location.href = baseUrl.toString();
        }

        function clearFilters() {
            window.location.href = "/all_problems_page.html";
        }

        function displayInfo(title) {
            if (currentUrl.searchParams.get("p") !== null) {
                currentUrl.searchParams.set("p", title);
            } else {
                currentUrl.searchParams.append("p", title);
            }
            window.location.href = currentUrl.toString();
        }


        function startQuestionPaperOnClick() {
            // If there is a paper selected
            if (currentUrl.searchParams.get("p") !== null) {
                window.location.href = `/question_solving_page?papername=` + currentUrl.searchParams.get("p").toString();
            } else {
                alert("Please select a problem to start!");
            }
        }
    </script>
    <script src={% static "resources/scripts/axure/ios.js" %}></script>
  </body>
</html>
